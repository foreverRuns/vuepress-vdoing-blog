---
title: 本站配置
date: 2022-02-17 19:50:29
permalink: /pages/6554a5/
categories:
  - 本站开发
tags:
  - 本站
---

# 本站配置

各配置项代码里有简单的注释，详细说明请自行查看官方文档： 
* [VuePress 默认主题配置](https://vuepress.vuejs.org/zh/theme/default-theme-config.html)
* [Vdoing 主题配置](https://doc.xugaoyi.com/pages/a20ce8/)
* 继承新增的配置项在[介绍篇](01.介绍.md)里查看

## 首页配置

在 `docs` 目录下的 `index.md`或 `README.md` 的 `front matter` 指定 `home: true`，就会为你的站点生成一个首页。  
在项目初始化时我们已经生成过跟VuePress官网一样的首页配置，现在按自己需求，修改为自己的首页配置。 

`docs/index.md` 

```yaml
---
home: true
# heroImage: /img/logo.png
heroText: 积硅步以至千里 积懈怠以致深渊
tagline: talk is cheap, show me the code. —— Linus
# actionText: 立刻进入 →
# actionLink: /categories/
bannerBg: none # auto => 网格纹背景(有bodyBgImg时无背景)，默认 | none => 无 | '大图地址' | background: 自定义背景样式       提示：如发现文本颜色不适应你的背景时可以到palette.styl修改$bannerTextColor变量

features: # 可选的
  - title: 文章
    details: 各种问题及解决办法的文章
    link: /article/  # 可选
    imgUrl: /img/article.png # 可选
  - title: 专栏
    details: 技术文档、读书笔记、相关教程
    link: /column/
    imgUrl: /img/column.png
  - title: 项目
    details: 从零到上线的项目开发过程
    link: /project/
    imgUrl: /img/project.png
# 文章列表显示方式: detailed 默认，显示详细版文章列表（包括作者、分类、标签、摘要、分页等）| simple => 显示简约版文章列表（仅标题和日期）| none 不显示文章列表
postList: none
# simplePostListLength: 10 # 简约版文章列表显示的文章数量，默认10。（仅在postList设置为simple时生效）

# !!!!!以下配置为继承新增的配置项-----------------
# 侧边栏分类框是否显示： 默认true，配置为true时，也需要打开分类功能才会显示，即主题配置themeConfig中的category配置为true
category: false
# 侧边栏标签框是否显示： 默认true，配置为true时，也需要打开标签功能才会显示，即主题配置themeConfig中的tag配置为true
tag: false
---
```

> `docs/.vuepress` 目录下新建 `public/img` 目录，用于存放所需的静态资源图片

## 导航配置

`docs/.vuepress/config/themeConfig/nav.js`

```js
module.exports = {
  nav: [
    // 说明：以下所有link的值只是在相应md文件头部定义的永久链接（那些随机数不是什么特殊编码）。另外，注意结尾是有斜杠的
    { text: '首页', link: '/' },
    {
      text: '文章',
      link: '/article/', //目录页链接，此处link是vdoing主题新增的配置项，有二级导航时，可以点击一级导航跳到目录页
      items: [
        { text: '前端', link: '/article/web/' },
        { text: '后端', link: '/article/server/' },
        { text: 'Linux', link: '/article/linux/' },
        { text: 'Openssl', link: '/article/openssl/' },
        { text: 'Level2', link: '/article/other/' },
      ],
    },
    {
      text: '专栏',
      link: '/column/',
      items: [
        { text: 'Markdown入门', link: '/column/md/' },
        { text: 'ES6标准入门', link: '/column/es6/' },
      ],
    },
    {
      text: '项目',
      link: '/project/',
      items: [{ text: '本站开发', link: '/project/blog/' }],
    },
    {
      text: '更多',
      link: '/more/',
      items: [
        { text: '网址收藏', items: [{ text: '收藏夹', link: '/pages/bb780f/' }] },
        {
          text: '摸鱼娱乐',
          items: [
            { text: 'VIP视频解析', link: '/pages/74e151/' },
            { text: '免费动漫', link: '/pages/312d52/' },
          ],
        },
      ],
    },
    { text: '关于', link: '/about/' },
    // {
    //   text: '索引',
    //   link: '/categories/',
    //   items: [
    //     { text: '分类', link: '/categories/' },
    //     { text: '标签', link: '/tags/' },
    //     { text: '归档', link: '/archives/' },
    //   ],
    // },
  ],

  navBefore: [
    {
      text: '🔑索引',
      // link: '/categories/',
      items: [
        { text: '分类', link: '/categories/' },
        { text: '标签', link: '/tags/' },
        { text: '归档', link: '/archives/' },
      ],
    },
  ],
}

```

> `navBefore` 是本站新增的配置项，[介绍篇](01.介绍.md) 有详细说明


## 主题配置

`docs/.vuepress/config/themeConfig.js`

```js
const { nav, navBefore } = require('./themeConfig/nav.js')

// 主题配置
module.exports = {
  nav, // 导航配置
  navBefore, // 继承后新增的前置nav，在搜索框前面
  sidebarDepth: 2, // 侧边栏显示深度，默认1，最大2（显示到h3标题）
  logo: '/img/logo.png', // 导航栏logo
  searchMaxSuggestions: 10, // 搜索结果显示最大数
  lastUpdated: '上次更新', // 开启更新时间，并配置前缀文字   string | boolean (取值为git提交时间)
  // 配置repo后，导航栏右侧生成相应的 repoLabel 链接，并在页面的底部生成一个默认的 "Edit this page" 链接，可通过editLinkText修改
  repo: 'foreverRuns/vuepress-vdoing-blog',
  // 自定义仓库链接文字。默认从 `themeConfig.repo` 中自动推断为 "GitHub"/"GitLab"/"Bitbucket" 其中之一，或是 "Source"。
  // repoLabel: '查看源码', 
  repoLink: false,  // 继承后新增的配置项，不显示顶部导航栏右边 repoLabel 链接
  docsDir: 'docs', // 编辑的文件夹
  docsBranch: 'main', // 文档放在main分支下
  editLinks: true, // 启用编辑
  editLinkText: '编辑此页',

  //*** 以下是Vdoing主题相关配置，文档：https://doc.xugaoyi.com/pages/a20ce8/ ***//
  // 随机图片API
  // bodyBgImg: 'https://api.yimian.xyz/img?type=moe&size=1920x1080', // body背景大图，默认无。 单张图片 String | 多张图片 Array, 多张图片时每隔15秒换一张。
  bodyBgImg: [
    'https://cdn.jsdelivr.net/gh/foreverRuns/image-hosting@main/blog/bg-street.568x7lyv9a0w.webp', 
    'https://cdn.jsdelivr.net/gh/foreverRuns/image-hosting@main/blog/bg-club.1s9q1gb7dk1s.webp', 
    'https://cdn.jsdelivr.net/gh/foreverRuns/image-hosting@main/blog/bg-classroom.1kvh5rjqvccg.webp'
  ], // body背景大图，默认无。 单张图片 String | 多张图片 Array, 多张图片时每隔15秒换一张。
  bodyBgImgOpacity: 0.45, // body背景图透明度，选值 0 ~ 1.0, 默认0.5

  // titleBadge: false, // 文章标题前的图标是否显示，默认true
  // titleBadgeIcons: [ // 文章标题前图标的地址，默认主题内置图标
  //   '图标地址1',
  //   '图标地址2'
  // ],
  contentBgStyle: 1, // 文章内容块的背景风格，默认无. 1 方格 | 2 横线 | 3 竖线 | 4 左斜线 | 5 右斜线 | 6 点状

  // updateBar: { // 最近更新栏
  //   showToArticle: false, // 显示到文章页底部，默认true
  //   moreArticle: '/archives' // “更多文章”跳转的页面，默认'/archives'
  // },
  // rightMenuBar: false, // 是否显示右侧文章大纲栏，默认true (屏宽小于1300px下无论如何都不显示)
  // sidebarOpen: false, // 初始状态是否打开左侧边栏，默认true
  // pageButton: false, // 是否显示快捷翻页按钮，默认true

  // 侧边栏  'structuring' | { mode: 'structuring', collapsable: Boolean} | 'auto' | <自定义>
  // 温馨提示：目录页数据依赖于结构化的侧边栏数据，如果你不设置为'structuring',将无法使用目录页
  sidebar: 'structuring',

  // 文章默认的作者信息，可在md文件中单独配置此信息 String | {name: String, link: String}
  author: {
    name: 'Runs', // 必需
    link: 'https://github.com/foreverRuns', // 可选的
  },

  // 博主信息，显示在首页侧边栏
  // blogger: {
  //   // 我的github头像
  //   avatar: 'https://avatars.githubusercontent.com/u/17795989?v=4',
  //   // 二次元随机头像
  //   // avatar: 'https://api.yimian.xyz/img?type=head',
  //   name: 'Runs Zheng',
  //   slogan: '就一个小学生',
  // },

  // 社交图标，显示于博主信息栏和页脚栏。内置图标：https://doc.xugaoyi.com/pages/a20ce8/#social
  social: {
    // iconfontCssFile: '//at.alicdn.com/t/font_1678482_u4nrnp8xp6g.css', // 可选，阿里图标库在线css文件地址，对于主题没有的图标可自己添加
    icons: [
      {
        iconClass: 'icon-youjian',
        title: '发邮件',
        link: 'mailto:894985240@qq.com',
      },
      {
        iconClass: 'icon-github',
        title: 'GitHub',
        link: 'https://github.com/foreverRuns',
      },
      {
        iconClass: 'icon-erji',
        title: '听音乐',
        link: 'https://music.163.com/#/playlist?id=755597173',
      },
    ],
  },

  // 页脚信息
  footer: {
    createYear: 2022, // 博客创建年份
    copyrightInfo: 'RunsZ | <a href="https://vuepress.vuejs.org/zh/" target="_blank">VuePress</a>', // 博客版权信息，支持a标签
  }
}

```

## 插件配置

> 配置中插件名字前缀 `vuepress-plugin-` 可以省略

### vuepress-plugin-last-updated

vuepress 已经包含该插件，无需再次安装。

1. 当你提供了 themeConfig.repo 选项，将会自动在每个页面的导航栏生成生成一个 GitHub 链接，以及在页面的底部生成一个 "Edit this page" 链接。  
通过下面配置可以做相应修改

`docs/.vuepress/config/themeConfig.js` 中

```js
// 配置repo后，导航栏右侧生成相应的 repoLabel 链接，并在页面的底部生成一个默认的 "Edit this page" 链接，可通过editLinkText修改
repo: 'foreverRuns/vuepress-vdoing-blog',
// 自定义仓库链接文字。默认从 `themeConfig.repo` 中自动推断为 "GitHub"/"GitLab"/"Bitbucket" 其中之一，或是 "Source"。
// repoLabel: '查看源码', 
repoLink: false,  // 继承后新增的配置项，不显示顶部导航栏右边 repoLabel 链接
docsDir: 'docs', // 编辑的文件夹
docsBranch: 'main', // 文档放在main分支下
editLinks: true, // 启用编辑
editLinkText: '编辑此页',
```

::: tip
你可以通过文章顶部的 YAML front matter 来禁用指定页面的编辑链接：

```md
---
editLink: false
---
```
:::

2. 你可以通过 themeConfig.lastUpdated 选项来获取每个文件最后一次 git 提交的 UNIX 时间戳(ms)，同时它将以合适的日期格式显示在每一页的底部：

`docs/.vuepress/config/themeConfig.js` 中

```js
lastUpdated: '上次更新', // 开启更新时间，并配置前缀文字   string | boolean (取值为git提交时间)
```

:::tip 
* 由于 lastUpdated 是基于 git 的, 所以你只能在一个基于 git 的项目中启用它。  
* 由于使用的时间戳来自 git commit，因此它将仅在给定页的第一次提交之后显示，并且仅在该页面后续提交更改时更新。
:::

3. 配置如下：

```sh
yarn add dayjs
```

```js
module.exports = [
  [
    '@vuepress/last-updated', // "上次更新"时间格式
    {
      transformer: (timestamp) => {
        const dayjs = require('dayjs') // https://day.js.org/
        return dayjs(timestamp).format('YYYY/MM/DD, HH:mm:ss')
      },
    },
  ],
]
```

显示效果如下：
![图片演示](https://cdn.jsdelivr.net/gh/foreverRuns/image-hosting@main/blog/lastupdate.4pxhi9k7lxj4.webp)

### vuepress-plugin-one-click-copy

代码块右上角添加 `复制按钮`，方便代码的复制

```sh
yarn add vuepress-plugin-one-click-copy
```

配置如下：  

```js
module.exports = [
  [
    'one-click-copy', // 代码块复制按钮
    {
      copySelector: ['div[class*="language-"] pre', 'div[class*="aside-code"] aside'], // String or Array
      copyMessage: '复制成功', // default is 'Copy successfully and then paste it for use.'
      duration: 1000, // prompt message display time.
      showInMobile: false, // whether to display on the mobile side, default: false.
    },
  ],
]
```

### vuepress-plugin-zooming

文章中的图片添加放大显示功能

```sh
yarn add vuepress-plugin-zooming
```

配置如下：  

```js
module.exports = [
  [
    'zooming', // 放大图片
    {
      // selector: '.theme-vdoing-content img:not(.no-zoom)', // 排除class是no-zoom的图片
      selector: '.theme-vdoing-content img:not(a > img, .no-zoom)', // 排除被a标签包含的img, 排除class是no-zoom的图片(不想放大的图片加上class="no-zoom")
      options: {
        bgColor: 'rgba(0,0,0,0.6)',
      },
    },
  ],
]
```

点击查看大图：  
![图片演示](https://cdn.jsdelivr.net/gh/foreverRuns/image-hosting@main/blog/bg-club.1s9q1gb7dk1s.webp)


### 其他插件

`vuepress-plugin-comment` 评论插件等，在后面详细说明

### 完整配置

:::details 点击查看目前插件配置
```js
// 插件配置 插件名字前缀 vuepress-plugin- 可以省略
module.exports = [
  [
    '@vuepress/last-updated', // "上次更新"时间格式
    {
      transformer: (timestamp) => {
        const dayjs = require('dayjs') // https://day.js.org/
        return dayjs(timestamp).format('YYYY/MM/DD, HH:mm:ss')
      },
    },
  ],
  [
    'one-click-copy', // 代码块复制按钮
    {
      copySelector: ['div[class*="language-"] pre', 'div[class*="aside-code"] aside'], // String or Array
      copyMessage: '复制成功', // default is 'Copy successfully and then paste it for use.'
      duration: 1000, // prompt message display time.
      showInMobile: false, // whether to display on the mobile side, default: false.
    },
  ],
  [
    'zooming', // 放大图片
    {
      // selector: '.theme-vdoing-content img:not(.no-zoom)', // 排除class是no-zoom的图片
      selector: '.theme-vdoing-content img:not(a > img, .no-zoom)', // 排除被a标签包含的img, 排除class是no-zoom的图片(不想放大的图片加上class="no-zoom")
      options: {
        bgColor: 'rgba(0,0,0,0.6)',
      },
    },
  ],
]

```
:::


## webpack配置

`docs/.vuepress/config/webpack.js`

```js
const path = require('path')

module.exports = {
  // webpack 配置
  resolve: {
    // 当你想要继承某个组件的时候，直接把源码中对应的组件复制到.vuepress/theme/components下修改，
    // 源码中其他地方用到该组件通过 @theme/components/XXX.vue 会自动地映射到子主题中对应的 XXX 组件。
    // 但是由于 vdoing主题 源码中某些组件的引用省略了.vue后缀, 比如：Layout.vue 中 import Footer from '@theme/components/Footer'
    // 这时候继承失败，会使用原主题的Footer组件，下面配置也无效不知为何，只能直接去主题源码中加上后缀 import Footer from '@theme/components/Footer.vue'
    extensions: ['.vue'], //省略 .vue后缀
    // 官方文档：主题想要被继承 所有的组件都必须使用 @theme 别名来引用其他组件。
    // 这里重新指定 @theme 为继承的vdoing主题所在目录，否则编译会出现各种组件找不到的错误（这里官网不知为何没有说明要重新指定@theme）
    alias: {
      '@theme': path.resolve(__dirname, '../../../node_modules/vuepress-theme-vdoing'),
    },
  },
}
```